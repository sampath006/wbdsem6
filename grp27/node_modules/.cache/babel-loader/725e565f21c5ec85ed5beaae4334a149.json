{"ast":null,"code":"var _jsxFileName = \"/Users/sampathkumarreddymanam/Documents/sem6/wbd/project-28-03/grp27/src/pages/settings/Settings.js\",\n    _s = $RefreshSig$();\n\nimport \"./settings.css\";\nimport { useState, useContext } from \"react\";\nimport { Context } from \"../../context/Context\";\nimport axios from \"axios\";\nimport NavBar from \"../../components/navbar/NavBar\";\nimport Footer from \"../../components/footer/Footer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Settings() {\n  _s();\n\n  //declaring set and use states\n  const [file, setFile] = useState(null);\n  const [username, setUsername] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [success, setSuccess] = useState(null); //fetching user details and dispatch from the context\n\n  const {\n    user,\n    dispatch\n  } = useContext(Context);\n  const PF = \"http://localhost:5000/images/\"; //handles update functionality\n\n  const handleUpdate = async e => {\n    e.preventDefault();\n    dispatch({\n      type: \"UPDATE_START\"\n    }); //displatch update start action\n\n    const updatedUser = {\n      userId: user._id,\n      username,\n      email,\n      password\n    }; //handles the image file\n\n    if (file) {\n      const data = new FormData();\n      const filename = Date.now() + file.name;\n      data.append(\"name\", filename);\n      data.append(\"file\", file);\n      updatedUser.profilePic = filename;\n\n      try {\n        await axios.post(\"/upload\", data); //post image data\n      } catch (err) {\n        console.log(err);\n      }\n\n      try {\n        const res = await axios.put(\"/users/\" + user._id, updatedUser); //update user details\n\n        setSuccess(true);\n        dispatch({\n          type: \"UPDATE_SUCCESS\",\n          payload: res.data\n        }); //dispatch update success action\n      } catch (err) {\n        dispatch({\n          type: \"UPDATE_FAILURE\"\n        }); //dispatch update failure action\n      }\n    }\n  }; //handles delete functionality\n\n\n  const handleDelete = async () => {\n    try {\n      await axios.delete(`/users/${user._id}`, {\n        //deletes user data from the backend\n        data: {\n          userId: user._id\n        }\n      });\n      dispatch({\n        type: \"LOGOUT\"\n      }); //dispatch logout action\n\n      window.location.replace(\"/login\"); //replaces the url\n    } catch (err) {}\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"settings\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"settingsWrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settingsTitle\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"settingsUpdateTitle\",\n            children: \"Update Your Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"settingsDeleteTitle\",\n            onClick: handleDelete,\n            children: \"Delete Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"settingsForm\",\n          onSubmit: handleUpdate,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Profile Picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"settingsProfile\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: file ? URL.createObjectURL(file) : PF + user.profilePic,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"fileInput\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"settingsProfileIcon far fa-user-circle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: \"fileInput\",\n              style: {\n                display: \"none\"\n              },\n              onChange: e => setFile(e.target.files[0])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: user.username,\n            onChange: e => setUsername(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            placeholder: user.email,\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"settingsSubmit\",\n            type: \"submit\",\n            children: \" Update \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 21\n          }, this), success && /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: \"green\",\n              textAlign: \"center\",\n              marginTop: \"20px\"\n            },\n            children: \"Your profile has been updated...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Settings, \"9MKomaC3qnAwmq2aHBUyxDsZLaM=\");\n\n_c = Settings;\n\nvar _c;\n\n$RefreshReg$(_c, \"Settings\");","map":{"version":3,"sources":["/Users/sampathkumarreddymanam/Documents/sem6/wbd/project-28-03/grp27/src/pages/settings/Settings.js"],"names":["useState","useContext","Context","axios","NavBar","Footer","Settings","file","setFile","username","setUsername","email","setEmail","password","setPassword","success","setSuccess","user","dispatch","PF","handleUpdate","e","preventDefault","type","updatedUser","userId","_id","data","FormData","filename","Date","now","name","append","profilePic","post","err","console","log","res","put","payload","handleDelete","delete","window","location","replace","URL","createObjectURL","display","target","files","value","color","textAlign","marginTop"],"mappings":"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","sourcesContent":["import \"./settings.css\";\r\nimport {useState, useContext} from \"react\";\r\nimport {Context} from \"../../context/Context\";\r\nimport axios from \"axios\";\r\nimport NavBar from \"../../components/navbar/NavBar\";\r\nimport Footer from \"../../components/footer/Footer\"\r\n\r\nexport default function Settings(){\r\n\r\n    //declaring set and use states\r\n    const [file, setFile] = useState(null);\r\n    const [username, setUsername] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [success, setSuccess] = useState(null);\r\n\r\n    //fetching user details and dispatch from the context\r\n    const {user, dispatch} = useContext(Context)\r\n    const PF = \"http://localhost:5000/images/\"\r\n\r\n    //handles update functionality\r\n    const handleUpdate = async (e)=>{\r\n        e.preventDefault();\r\n        dispatch({type:\"UPDATE_START\"});//displatch update start action\r\n        const updatedUser = {\r\n            userId:user._id,\r\n            username,\r\n            email,\r\n            password,\r\n        };\r\n\r\n        //handles the image file\r\n        if(file){\r\n            const data = new FormData();\r\n            const filename = Date.now() + file.name;\r\n            data.append(\"name\",filename);\r\n            data.append(\"file\",file);\r\n            updatedUser.profilePic = filename;\r\n            try {\r\n                await axios.post(\"/upload\", data);//post image data\r\n            } catch (err) {\r\n                console.log(err)\r\n            }\r\n            try {\r\n                const res = await axios.put(\"/users/\"+ user._id, updatedUser);//update user details\r\n                setSuccess(true);\r\n                dispatch({type:\"UPDATE_SUCCESS\",payload:res.data});//dispatch update success action\r\n            } catch (err) {\r\n                dispatch({type:\"UPDATE_FAILURE\"})//dispatch update failure action\r\n            }\r\n        }\r\n    };\r\n\r\n    //handles delete functionality\r\n    const handleDelete = async ()=>{\r\n        try {\r\n          await axios.delete(`/users/${user._id}`,{//deletes user data from the backend\r\n            data:{userId:user._id},\r\n          });\r\n          dispatch({type:\"LOGOUT\"});//dispatch logout action\r\n          window.location.replace(\"/login\");//replaces the url\r\n    \r\n        } catch (err) {\r\n          \r\n        }\r\n      }\r\n\r\n    return (\r\n        <>\r\n        <NavBar />\r\n        <div className=\"settings\">\r\n            <div className=\"settingsWrapper\">\r\n                <div className=\"settingsTitle\">\r\n                    <span className=\"settingsUpdateTitle\">Update Your Account</span>\r\n                    {/* on click it deletes the accout */}\r\n                    <span className=\"settingsDeleteTitle\" onClick={handleDelete}>Delete Account</span>\r\n                </div>\r\n\r\n                <form className=\"settingsForm\" onSubmit={handleUpdate}>\r\n                {/* add profile image */}\r\n                    <label>Profile Picture</label>\r\n                    <div className=\"settingsProfile\">\r\n                        <img\r\n                            src={file ? URL.createObjectURL(file) : PF + user.profilePic}\r\n                            alt=\"\"\r\n                        />\r\n                        {/* file input */}\r\n                        <label htmlFor=\"fileInput\">\r\n                            <i className=\"settingsProfileIcon far fa-user-circle\"></i>\r\n                        </label>\r\n                        <input type=\"file\" id=\"fileInput\" style={{ display: \"none\" }} onChange={(e) => setFile(e.target.files[0])}/>\r\n                    </div>\r\n                    {/* username */}\r\n                    <label>Username</label>\r\n                    <input type=\"text\" placeholder={user.username} onChange={(e) => setUsername(e.target.value)}/>\r\n                    {/* email */}\r\n                    <label>Email</label>\r\n                    <input type=\"email\" placeholder={user.email} onChange={(e) => setEmail(e.target.value)}/>\r\n                    {/* password */}\r\n                    <label>Password</label>\r\n                    <input type=\"password\" onChange={(e) => setPassword(e.target.value)}/>\r\n                    \r\n                    {/* update button */}\r\n                    <button className=\"settingsSubmit\" type=\"submit\"> Update </button>\r\n\r\n                    {/* if succesful display message */}\r\n                    {success && <span style={{color:\"green\",textAlign:\"center\",marginTop:\"20px\"}}>Your profile has been updated...</span>}\r\n                    \r\n                </form>\r\n\r\n            </div>\r\n            \r\n        </div>\r\n        <Footer />\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}